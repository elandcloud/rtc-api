# docker-test

A tool that runs microservices and their dependent services. These services are generated by docker-compose and can docker on linux, mac, windows 10, windows 7, etc.

## Getting Started

Download
```
$ wait ...
```

Example
```
$ ./docker-test run go-api
```

## log
https://job-monitor.p2shop.com.cn/#/
service: rtc

## Help

```bash
usage: docker-test.exe run [<flags>] <service-name>

Run a service and its dependencies.

Args:
  <service-name>  The name of the service, you can get it by `docker-test.exe ls -h`.

Flags:
  -h, --help                   Show context-sensitive help (also try --help-long
                               and --help-man).
  -v, --version                Show application version.
  -u, --updated="remote"
                                 1.Optional [remote, local].
                                 2.The program will get the following information from the remote: service information,basic test data and docker image.
                                 3.The default is remote,if you do not want to get data from remote, please use local.
      --image-env="qa"
                                 1.Optional [staging, qa , production].
                                 2.The program will download the latest image from Jenkins.
                                 3.The default is qa, you can choose other option
      --mysql-port="3306"      You can change default mysql port.
      --redis-port="6379"      You can change default redis port.
      --mongo-port="27017"     You can change default mongo port.
      --sqlserver-port="1433"  You can change default sqlserver port.
      --kafka-port="9092"      You can change default kafka port.
      --kafka-second-port="29092"
                               This parameter is reserved.
      --event-broker-port="3000"
                               You can change default event-broker port.
      --nginx-port="3001"      You can change default nginx port.
      --zookeeper-port="2181"  You can change default zookeeper port.
```


## References

- mysql tool: [mysql](https://github.com/go-sql-driver/mysql)
- kafka tool: [kafka-go](github.com/segmentio/kafka-go)
- host tool : [goodhosts](github.com/lextoumbourou/goodhosts)
- configuration tool: 
  - [viper](https://github.com/spf13/viper) 
  - [yaml](github.com/ghodss/yaml)
  - [kingpin](github.com/alecthomas/kingpin)
- utils: https://github.com/pangpanglabs/goutils
